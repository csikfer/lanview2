// lanview2 import fájl
// Megjelenítéssel kapcsolatos adatok

// Enumerációs értékek megjelenítése:

DELETE ENUM TITLE dayofweek;
//   típus          érték neve            megjelenítendő szöveg                
ENUM dayofweek      sunday          TITLE "vasárnap";
ENUM dayofweek      monday          TITLE "hétfő";
ENUM dayofweek      tuesday         TITLE "kedd";
ENUM dayofweek      wednesday       TITLE "szerda";
ENUM dayofweek      thursday        TITLE "csütörtök";
ENUM dayofweek      friday          TITLE "péntek";
ENUM dayofweek      saturday        TITLE "szombat";

DELETE ENUM TITLE notifswitch;
ENUM notifswitch    on              TITLE "rendben";
ENUM notifswitch    recovered       TITLE "helyreállt";
ENUM notifswitch    warning         TITLE "figyelmeztetés";
ENUM notifswitch    critical        TITLE "kritikus";
ENUM notifswitch    unreachable     TITLE "nem válaszol";
ENUM notifswitch    down            TITLE "kikapcsolva";
ENUM notifswitch    flapping        TITLE "billeg";
ENUM notifswitch    unknown         TITLE "ismeretlen";

DELETE ENUM TITLE rights;
ENUM rights         none            TITLE "jogosulatlan";
ENUM rights         viewer          TITLE "megfigyelő";
ENUM rights         indalarm        TITLE "riasztás figyelő";
ENUM rights         operator        TITLE "operátor";
ENUM rights         admin           TITLE "adminisztrátor";
ENUM rights         system          TITLE "rendszer";

DELETE ENUM TITLE filtertype;
ENUM filtertype     begin           TITLE "Szó eleji egyezés";
ENUM filtertype     like            TITLE "Minta illesztés a LIKE operátorral";
ENUM filtertype     similar         TITLE "Minta illesztés a SIMILAR operátorral";
ENUM filtertype     regexp          TITLE "Minta illesztés reguláris kifelyezéssel, nagybetű érzékeny";
ENUM filtertype     regexpi         TITLE "Minta illesztés reguláris kifelyezéssel, nem nagybetű érzékeny";
ENUM filtertype     big             TITLE "Csak egy értéknél nagyobbakat";
ENUM filtertype     litle           TITLE "Csak egy értéknél kisebbeket";
ENUM filtertype     interval        TITLE "Csak a megadott két érték közöttiek";
ENUM filtertype     proc            TITLE "Szűrés egy magadott SQL függvénnyel";
ENUM filtertype     SQL             TITLE "A szürési feltétel megadása SQL nyelven";

// ***************************************************************************************
// Objects:
// Adattáblák (objektumok) megjelenítése

MACRO DefRights $$
TABLE VIEW   RIGHTS operator;       // Megjeleníthető csak operátor vagy magasabb jogosultsággal
TABLE EDIT   RIGHTS admin;          // Mődosítható admin joggal
TABLE DELETE RIGHTS admin;          // Egy elem törölhető admin joggal
TABLE INSERT RIGHTS admin;          // Új elem beszúrható admin joggal
$$;

DELETE TABLE SHAPE pports;

TABLE SHAPE pports "Pach panel és fali csatlakozó portok" {
    SET DEFAULTS;               // Az összes mező felvétele alapértelmezett tulajdonságokkal
//  TABLE TYPE child;           // Más táblával (owner) kapcsolatban jelenítjük csak meg (patchs). A 'SET DEFAULTS' már beállította.
    TABLE INHERIT TYPE "only";  // Öröklés kizárása, ős ill. leszármazott objektumok nem kerülnek megjelenítésre
//  FIELD node_id HIDE;         // Az owner-nél már megjelenítettük, itt felesleges. A 'SET DEFAULTS' már beállította.
    FIELD deleted HIDE;
    FIELD iftype_id HIDE;       // Csak egy típus van, nem jelenítjük meg
    FIELD iftype_id READ ONLY;  // Mivel egy típus lehet, azt nem változtathatjuk meg.
    FIELD iftype_id DEFAULT VALUE STRING(ID IFTYPE(patch));     // Új objektumnál ezt a típust kell beállítani
    FIELD port_index ORD asc,desc,no;   // Alapértelmezetten a port indexre lessz rendezve
    FIELD port_name, port_tag  ORD no, asc, desc;       // Rendezhető még a névre vagy a cimkére
    FIELD port_index ADD FILTERS big, litle, interval; // A port indexre megadható szűrő: kicebb, nagyobb és tartomány
    FIELD port_name, port_tag, port_note ADD FILTERS like, similar, regexp, regexpi;
    $DefRights
}

DELETE TABLE SHAPE patchs;
TABLE SHAPE patchs "Pach panelek és fali csatlakozók" {
    SET DEFAULTS;
    TABLE TYPE owner;
    TABLE INHERIT TYPE "only";
    RIGHT SHAPE pports;         // A portok listájával együtt jelenítjük meg
    FIELD deleted HIDE;
    FIELD node_name ORD asc,desc,no;
    FIELD node_note, place_id ORD no, asc, desc;
    FIELD node_name, node_note ADD FILTERS begin, like, similar, regexp, regexpi;
    $DefRights
}

DELETE TABLE SHAPE nports;
TABLE SHAPE nports "Passzív portok" {
    SET DEFAULTS;
    TABLE INHERIT TYPE only;
    $DefRights
    FIELD deleted HIDE;
    FIELD port_name ORD asc,desc,no;
    FIELD port_tag, port_note, iftype_id, port_index ORD no, asc, desc;
    FIELD port_index ADD FILTERS big, litle, interval;
    FIELD port_name, port_tag, port_note ADD FILTERS begin, like, similar, regexp, regexpi;
    FIELD iftype_id ADD FILTERS like;
}

DELETE TABLE SHAPE nodes;
TABLE SHAPE nodes "Passzív, felügyeltbe bevont elemek" {
    SET DEFAULTS;
    TABLE TYPE owner;
    TABLE INHERIT TYPE only;
    RIGHT SHAPE nports;
    $DefRights
    FIELD deleted HIDE;
    FIELD node_name ORD asc,desc,no;
    FIELD node_note, place_id, node_stat, alarm_place_group_id ORD no, asc, desc;
    FIELD node_name, node_note,node_stat,node_type ADD FILTERS begin, like, similar, regexp, regexpi;
    FIELD node_stat READ ONLY;
    FIELD node_stat DEFAULT VALUE unkbown;
}

DELETE TABLE SHAPE ipaddresses;
TABLE SHAPE ipaddresses "IP címek" {
    SET DEFAULTS;
//  TABLE INHERIT TYPE no;      // 'no' a default
    FIELD preferred ORD asc,desc,no;
    FIELD address, ip_address_note ORD no, asc, desc;
    $DefRights
}

DELETE TABLE SHAPE hostports;
TABLE interfaces SHAPE hostports "Hálózati interfészek, portok" {
    SET DEFAULTS;
    TABLE TYPE child, owner;
    RIGHT SHAPE ipaddresses;
    TABLE INHERIT TYPE listed_rev;
    INHERIT TABLE NAMES nports;                 // A teljes lista: interfaces, nports
    FIELD port_ostat, port_astat READ ONLY;
    FIELD port_ostat, port_astat DEFAULT VALUE unknown;
    FIELD deleted HIDE;
    FIELD port_index ORD asc,desc,no;
    FIELD port_name, port_tag, port_note, iftype_id ORD no, asc, desc;
    FIELD port_name, port_tag, port_note ADD FILTERS begin, like, similar, regexp, regexpi;
    $DefRights
}

DELETE TABLE SHAPE allnodes;
TABLE snmpdevices SHAPE allnodes "Hálózati elemek" {
    SET DEFAULTS;
    TABLE TYPE owner;
    TABLE INHERIT TYPE listed_rev;      // Megjelenítjük az ős tábla elemeit is
    RIGHT SHAPE hostports;
    FIELD node_name ORD asc,desc,no;
    FIELD node_note, place_id ORD no, asc, desc;
    FIELD node_name, node_note, place_id ADD FILTERS begin, like, similar, regexp, regexpi;
    $DefRights
}

/*
DELETE TABLE SHAPE snmpdevices;
TABLE SHAPE snmpdevices "SNMP hosts" {
    SET DEFAULTS;
    TABLE TYPE no;
    $DefRights
}
*/

DELETE TABLE SHAPE places;
TABLE SHAPE places "Helyiségek" {
    SET DEFAULTS;
    TABLE TYPE simple;  // A 'SET DEFAULTS' tree-re állítja, de tree még nincs...
    $DefRights
}

DELETE TABLE SHAPE host_services;
TABLE SHAPE host_services "A hostkokhoz rendelt szervíz példányok" {
    SET DEFAULTS;
    TABLE TYPE simple;
    FIELD node_id, service_id, prime_service_id, proto_service_id ADD FILTERS begin, like, similar, regexp, regexpi;
    FIELD node_id, service_id, port_id ORD asc,desc,no;
    FIELD prime_service_id, proto_service_id, superior_host_service_id, host_service_state, soft_state, hard_state, last_changed, last_touched ORD no,asc,desc;
    $DefRights
}

DELETE TABLE SHAPE services;
TABLE SHAPE services "Szervíz típusok" {
    SET DEFAULTS;
    TABLE TYPE simple;
    FIELD service_name ORD asc,desc,no;
    FIELD service_name ADD FILTERS begin, like, similar, regexp, regexpi;
    $DefRights
}


DELETE TABLE SHAPE subnets;
TABLE SHAPE subnets "Alhálózatok" {
    SET DEFAULTS;
    TABLE TYPE simple;
    $DefRights
}

DELETE TABLE SHAPE vlans;
TABLE SHAPE vlans "VLAN-ok" {
    SET DEFAULTS;
    TABLE TYPE simple;
    $DefRights
}

// ***************************************************************************************
// events

DELETE TABLE SHAPE alarms;
TABLE SHAPE alarms "Riasztások" {
    SET DEFAULTS;
    TABLE TYPE simple;
    TABLE READ ONLY;
    FIELD alarm_id          TITLE "ID"            "Riasztás egyedi azonosító kódja";
    FIELD host_service_id   TITLE "host:service" "Szolgálltatás példány";
    FIELD daemon_id         TITLE "daemon"        "Lekérdező daemon";
    FIELD first_status      TITLE "kezdő áll."    "Állapot a risztás kezdetekor";
    FIELD max_status        TITLE "crit. áll."    "Legkritikusabb állapot a riasztás alatt";
    FIELD begin_time        TITLE "kezdete"       "A kritikus esemény kezdete";
    FIELD event_note        TITLE "üzenet"        "A riasztást dezektáló folyamat üzenete";
    FIELD superior_alarm_id TITLE  "Függ.Figy." "Felsőbb szintű riasztás";
    FIELD noalarm           TITLE "letiltva"      "Az értesítés letiltása";
    FIELD end_time          TITLE "vége"          "A kritikus esemény vége";
    FIELD msg_time          TITLE "uzenet küldve" "A riasztási üzenet elküldésének az időpontja";
    FIELD alarm_time        TITLE "on-line ért."  "Az on-line riasztás időpontja";
    FIELD notice_time       TITLE "megnézte"      "Az első on-line riasztás állapot lekérdezésének az ideje.";
    FIELD notice_user_id    TITLE "aki megnézte"  "Az első on-line riasztási állapot lekérdezéső felhasználó";
    FIELD ack_time          TITLE "nyugtázva"     "A riasztás nyugtázásának az időpontja";
    FIELD ack_user_id       TITLE "aki nyugtázta" "A riasztást nyugtázó felhasználó";
    FIELD ack_msg           TITLE "megjegyzés"    "A nyugtázó megjegyzése";

    FIELD host_service_id, daemon_id, max_status, event_note, noalarm, notice_user_id, ack_user_id, ack_msg ADD FILTERS begin, like, similar, regexp, regexpi;
    FIELD begin_time, end_time, msg_time, alarm_time, notice_time, ack_time ADD FILTERS big, litle, interval;
    FIELD begin_time ORD desc, asc, no;
    FIELD end_time, msg_time, alarm_time, notice_time, notice_user_id, ack_time, ack_user_id, ack_msg ORD no, desc, asc;
    $DefRights
}

DELETE TABLE SHAPE app_errs;
TABLE SHAPE app_errs "Applikáció hiba napló" {
    SET DEFAULTS;
    TABLE READ ONLY;
    $DefRights
}

DELETE TABLE SHAPE host_service_logs;
TABLE SHAPE host_service_logs "A szervíz példányok log rekordjai" {
    SET DEFAULTS;
    TABLE READ ONLY;
    TABLE TYPE simple;
    FIELD host_service_id ADD FILTERS begin, like, similar, regexp, regexpi;
    FIELD * ORD no;
    $DefRights
}

// ***************************************************************************************
// Others:

DELETE TABLE SHAPE arps;
TABLE SHAPE arps "ARP tábla" {
    SET DEFAULTS;
    TABLE TYPE simple;
    FIELD ipaddress  TITLE "IP"     "IP cím";
    FIELD hwaddress  TITLE "MAC"    "MAC cím";
    FIELD first_time TITLE first    "Első detektálás ideje";
    FIELD last_time  TITLE last     "Utoló detektálás ideje";
    $DefRights
}

DELETE TABLE SHAPE mactab;
TABLE SHAPE mactab "Port címtábla" {
    SET DEFAULTS;
    $DefRights
}

// ***************************************************************************************
// GUI


DELETE TABLE SHAPE table_shape_filters;
TABLE SHAPE table_shape_filters "Szűrési lehetőséget a mezőkre" {
    SET DEFAULTS;
    TABLE TYPE child;
    FIELD table_shape_field_id HIDE;
    $DefRights
}

DELETE TABLE SHAPE table_shape_fields;
TABLE SHAPE table_shape_fields "Tábla mezők megjelenítése" {
    SET DEFAULTS;
    TABLE TYPE child, owner;
    RIGHT SHAPE table_shape_filters;
    FIELD table_shape_id HIDE;
    $DefRights
}

DELETE TABLE SHAPE table_shapes;
TABLE SHAPE table_shapes "Táblák megjelenítése" {
    SET DEFAULTS;
    TABLE TYPE owner;
    RIGHT SHAPE table_shape_fields;
    $DefRights
}

DELETE TABLE SHAPE menu_items;
TABLE SHAPE menu_items "Menu elemek" {
    SET DEFAULTS;
    TABLE TYPE simple; // tree
    $DefRights
}

DELETE TABLE SHAPE enum_vals;
TABLE SHAPE enum_vals "Enumerációs értékek" {
    SET DEFAULTS;
    TABLE TYPE simple;
    $DefRights
}

DELETE TABLE SHAPE param_types;
TABLE SHAPE param_types "Paraméter típus leírók" {
    SET DEFAULTS;
    TABLE TYPE simple;
    $DefRights
}

DELETE TABLE SHAPE sys_params;
TABLE SHAPE sys_params "Rendszer paraméterek" {
    SET DEFAULTS;
    TABLE TYPE simple;
    $DefRights
}

DELETE TABLE SHAPE users;
TABLE SHAPE users "felhasználók" {
    SET DEFAULTS;
    TABLE TYPE simple;
    $DefRights
}

DELETE TABLE SHAPE groups;
TABLE SHAPE groups "felhasználói csoportok" {
    SET DEFAULTS;
    TABLE TYPE simple;
    $DefRights
}

DELETE TABLE SHAPE place_groups;
TABLE SHAPE place_groups "Hely és helyiség csoportok / Zónák" {
    SET DEFAULTS;
    TABLE TYPE simple;
    $DefRights
}

DELETE GUI lv2gui MENU;

GUI lv2gui {
  file MENU "fájl" {
    setup       OWN     setup           "Beállítások";
    sys_params  SHAPE   sys_params      "Rendszer paraméterek";
    param_types SHAPE   param_types     "Paraméter típus leírók";
    restart     EXEC    restart         "Újraindítás";
    exit        EXEC    exit            "Kilép";
  }
  userss MENU "Felhasználók" {
      users     SHAPE   users           "Felhasználók";
      groups    SHAPE   groups          "Felhasználói csoportok";
      zones     SHAPE   place_groups    "Zónák";
  }
  objects MENU "Objektumok" {
    patchs      SHAPE   patchs          "Patch panelek";
    nodes       SHAPE   allnodes        "Hálózati elemek";
    places      SHAPE   places          "Helyek, helyiségek";
    services    SHAPE   services        "Szolgáltatás típusok";
    host_services SHAPE host_services   "Szolgáltatás példányok";
    subnets     SHAPE   subnets         "Alhálózatok";
    vlans       SHAPE   vlans           "VLAN-ok";
  }
  events MENU "Események" {
    alarms      SHAPE   alarms          "Riasztások";
    app_errs    SHAPE   app_errs        "Program hibák";
    host_service_logs SHAPE host_service_logs "Szervíz log";
  }
  others MENU "Egyéb táblák" {
    arps        SHAPE   arps            "ARP tábla";
    mactab      SHAPE   mactab          "Port címtáblák";
  }
  gui MENU "Megjelenítés" {
    shapes      SHAPE   table_shapes    "Táblák megjelenítése";
    enums       SHAPE   enum_vals       "Enumerációs értékek";
    menus       SHAPE   menu_items      "GUI menük";
  }
  tools MENU "Eszközök" {
    import      OWN     parser          "Szöveges import";
  }
}