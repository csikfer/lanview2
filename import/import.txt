// Adatbázis import és lekérdezések

INCLUDE "import_srv.txt";

VLAN    1 admdev    "Hálózati eszközök"                     { 172.20.128.0/255.255.255.0;  }
VLAN   51 wifiin    "Wifi private"                          { 172.20.51.0/24;   }
VLAN   52 wifiout   "Wifi edu"                              { 172.20.52.0/23;   }
VLAN 3000 SSN       "KKFK Demilitarizált zóna"              { 172.20.0.0/24;    }
VLAN 3001 devices   "KKFK szerverek egyébb eszközök"        { 172.20.1.0/24;    }
VLAN 3003 TH        "Tanulmányi hivatal"                    { 172.20.3.0/24;    }
VLAN 3004 GH        "Gazdasági hivatal"                     { 172.20.4.0/24;    }
VLAN 3005 KVT       "Könyvtár"                              { 172.20.5.0/24;    }
VLAN 3006 EF        "E-épület földszint"                    { 172.20.6.0/24;    }
VLAN 3007 E1        "E-épület 1. emelet"                    { 172.20.7.0/24;    }
VLAN 3008 E2        "E-épület 2. emelet"                    { 172.20.8.0/24;    }
VLAN 3009 KF        "K-épület földszint"                    { 172.20.9.0/24;    }
VLAN 3010 K1        "K-épület 1. emelet"                    { 172.20.10.0/24;   }
VLAN 3011 K2        "K-épület 2. emelet"                    { 172.20.11.0/24;   }
VLAN 3012 AULA      "AULA (nem használt)"                   { 172.20.12.0/24;   }
VLAN 3013 DF        "D-épület földszint"                    { 172.20.13.0/24;   }
VLAN 3014 D1        "D-épület 1. emelet"                    { 172.20.14.0/24;   }
VLAN 3015 D2        "D-épület 2. e., kollégium, tornacs."   { 172.20.15.0/24;   }
VLAN 3016 hallgdev  "KKFKEDU szerverek egyébb eszközök"     { 172.20.16.0/24;   }
VLAN 3017 HALLG01   "Tanterem D I 45"                       { 172.20.17.0/24;   }
VLAN 3018 HALLG02   "Tanterem D I 46"                       { 172.20.18.0/24;   }
VLAN 3019 HALLG03   "Tanterem D I 47"                       { 172.20.19.0/24;   }
VLAN 3020 HALLG04   "Tanterem D I 48"                       { 172.20.20.0/24;   }
VLAN 3021 HALLG05   "Tanterem D I 49"                       { 172.20.21.0/24;   }
VLAN 3022 HALLG06   "Tanterem D I 50"                       { 172.20.22.0/24;   }
VLAN 3023 HALLG07   "Tanterem D I 51"                       { 172.20.23.0/24;   }
VLAN 3024 HALLG08   "Tanterem D I 52"                       { 172.20.24.0/24;   }
VLAN 3025 HALLG09   "Tanterem D I 53"                       { 172.20.25.0/24;   }
VLAN 3026 HALLG10   "Tanterem D I 37"                       { 172.20.26.0/24;   }
VLAN 3027 HALLG11   "Tanterem D I 32"                       { 172.20.27.0/24;   }
VLAN 3028 HALLG12   "Tanterem D I 32"                       { 172.20.28.0/24;   }
VLAN 3029 HALLG13   "Tanterem Előadók"                      { 172.20.29.0/24;   }
VLAN 3030 HALLG14   "Tanterem egyébb"                       { 172.20.30.0/24;   }
VLAN 3031 HALLG15   "Diákszervezetek"                       { 172.20.31.0/24;   }
VLAN 3032 kolldev   "Kollégium eszközök"                    { 172.20.32.0/24;   }
VLAN 3033 kollf     "Kollégium, diákok, földzsint"          { 172.20.33.0/24;   }
VLAN 3034 koll1     "Kollégium, diákok, 1. emelet"          { 172.20.34.0/24;   }
VLAN 3035 koll2     "Kollégium, diákok, 2. emelet"          { 172.20.35.0/24;   }
VLAN 3036 koll3     "Kollégium, diákok, 3. emelet"          { 172.20.36.0/24;   }
VLAN 3037 koll4     "Kollégium, diákok, 4. emelet"          { 172.20.37.0/24;   }
VLAN 3038 kollkt    "Kollégium, diákok, közös terem"        { 172.20.38.0/24;   }
VLAN 3048 vendeg    "Vendégek"                              { 172.20.48.0/24;   }
VLAN 3049 vendegkvt "Könyvtár vendég"                       { 172.20.49.0/24;   }
VLAN 3050 wifidev   "Wifi AP-k"                             { 172.20.50.0/24;   }
VLAN 3054 KANYAR    "Kanyar szerkesztőség"                  { 172.20.54.0/24;   }
VLAN 3058 tctest    "Vékony kliens teszt"                   { 172.20.58.0/24;   }
VLAN 3059 kvtedu    "Könyvtár diákok"                       { 172.20.59.0/24;   }
VLAN 3060 kiosks    "Kiosk-ok (LTSP Kiosk)"                 { 172.20.60.0/24;   }
VLAN 3061 tclientsedu "Thin Clients EDU"                    { 172.20.61.0/24;   }
VLAN 3062 tclients  "Thin Clients"                          { 172.20.62.0/24;   }
VLAN 3063 tcd107    "Thin Clients DI 07 tanterem"           { 172.20.63.0/24;   }
VLAN 3064 dmzedu    "KKFKEDU Demilitarizalt zóna"           { 172.20.64.0/24;   }
VLAN 3134 voip      "Voice over IP eszközök"                { 172.20.134.0/24;  }
VLAN 3135 alarm     "Riasztó, kamera rendszer"              { 172.20.135.0/24;  }
VLAN 3999 public    "KKFK public subnet"                    { 193.225.146.0/24; }


TIME PERIOD worktime "Munkaidőben";
TIME OF DAY wrk_mon monday    FROM 8:00 TO 16:50 ADD TIME PERIOD worktime;
TIME OF DAY wrk_tue tuesday   FROM 8:00 TO 16:50 ADD TIME PERIOD worktime;
TIME OF DAY wrk_wed wednesday FROM 8:00 TO 16:50 ADD TIME PERIOD worktime;
TIME OF DAY wrk_thu thursday  FROM 8:00 TO 16:50 ADD TIME PERIOD worktime;
TIME OF DAY wrk_fri friday    FROM 8:00 TO 14:20 ADD TIME PERIOD worktime;

TIME PERIOD worktime2 "Munkaidőben";
TIME OF DAY wrk2_mon monday    FROM 7:30 TO 16:20 ADD TIME PERIOD worktime2;
TIME OF DAY wrk2_tue tuesday   FROM 7:30 TO 16:20 ADD TIME PERIOD worktime2;
TIME OF DAY wrk2_wed wednesday FROM 7:30 TO 16:20 ADD TIME PERIOD worktime2;
TIME OF DAY wrk2_thu thursday  FROM 7:30 TO 16:20 ADD TIME PERIOD worktime2;
TIME OF DAY wrk3_fri friday    FROM 7:30 TO 13:50 ADD TIME PERIOD worktime2;

TIME PERIOD kiosktime "Kioskok működési időintervallumok";
TIME OF DAY kiosk_mon monday    FROM 7:30 TO 20:30 ADD TIME PERIOD kiosktime;
TIME OF DAY kiosk_tue tuesday   FROM 7:30 TO 20:30 ADD TIME PERIOD kiosktime;
TIME OF DAY kiosk_wed wednesday FROM 7:30 TO 20:30 ADD TIME PERIOD kiosktime;
TIME OF DAY kiosk_thu thursday  FROM 7:30 TO 20:30 ADD TIME PERIOD kiosktime;
TIME OF DAY kiosk_fri friday    FROM 7:30 TO 20:30 ADD TIME PERIOD kiosktime;

///////////////////////////////////
// Az ARP tábla beolvasása az adatbázisból:
READ ARPS;
// Azon eszközök definiálása, melyekről ARP tábla (ill MAC/IPcím összerendelés) lekérdezhető:
// ARP tábla lekérdezése SNMP-n keresztül:
ADD ARP SERVER 172.20.1.1   BY SNMP COMMUNITY "public";
// ADD ARP SERVER 172.20.1.2   BY SNMP COMMUNITY "public";	// XAR ;(
// ADD ARP SERVER 172.20.16.2  BY SNMP COMMUNITY "public";	// XAR ;(
ADD ARP LOCAL   BY PROC FILE;
ADD ARP SERVER 172.20.1.180 BY SSH  DHCPD CONFIG "/etc/dhcp/dhcpd.conf";
UPDATE ARPS;
///////////////////////////////////
// Macro definíciók
MACRO KKL $$ "%1.kkfk.local" $$                                 SAVE "Lokális domain név hálózati eszközök.";
MACRO KBL $$ "%1.kkfk.bgd.local" $$                             SAVE "Lokális DC domain név.";
MACRO EBL $$ "%1.kkfkedu.bgdedu.local" $$                       SAVE "Lokális EDU DC domain név.";
MACRO KKK $$ "%1.bgf.hu" $$					  SAVE "Publikus domain név.";
MACRO SW  $$ SNMPDEV $KKL(%1) LOOKUP ARP "%2" { PORTS BY SNMP; } $$ SAVE "Menedzselhető switch definíciója. Paraméterek, rövid név, megjegyzés.";
MACRO P12 $$ PATCH   "%1" "%2" COPY FROM patch12 $$             SAVE "12 portos patch panel definíciója. Paraméterek, név, megjegyzés.";
MACRO P24 $$ PATCH   "%1" "%2" COPY FROM patch24 $$             SAVE "24 portos patch panel definíciója. Paraméterek, név, megjegyzés.";
MACRO P48 $$ PATCH   "%1" "%2" COPY FROM patch48 $$             SAVE "48 portos patch panel definíciója. Paraméterek, név, megjegyzés.";
MACRO C1  $$ PATCH   "%1" "%2" COPY FROM conn1 $$               SAVE "1 portos (fali) csatlakozó definíciója. Paraméterek, név, megjegyzés.";
MACRO C2  $$ PATCH   "%1" "%2" COPY FROM conn2 $$               SAVE "2 portos (fali) csatlakozó definíciója. Paraméterek, név, megjegyzés.";
MACRO C2S $$ PATCH   "%1" "%2" COPY FROM conn2 { $SHR(1) } $$   SAVE "2 portos (fali) csatlakozó, hátlapi megosztással(A,B). Paraméterek, név, megjegyzés.";
MACRO SHR $$ PORTS  %1, #+@ SHARED A,B; $$                      SAVE "Patch port hátlapi megosztás paraméter az A port indexe vagy neve, B típus a következő port.";

PATCH TEMPLATE patch12 $$ ADD PORTS FROM 1 TO 12 "J??"; $$      SAVE "12 portos patch panel, port definíciók.";
PATCH TEMPLATE patch24 $$ ADD PORTS FROM 1 TO 24 "J??"; $$      SAVE "24 portos patch panel, port definíciók.";
PATCH TEMPLATE patch48 $$ ADD PORTS FROM 1 TO 48 "J??"; $$      SAVE "48 portos patch panel, port definíciók.";
PATCH TEMPLATE conn1   $$ ADD PORT       1       "J1";  $$      SAVE "1 portos fali csatlakozó, port definíciók.";
PATCH TEMPLATE conn2   $$ ADD PORTS FROM 1 TO  2 "J?";  $$      SAVE "2 portos fali csatlakozó, port definíciók.";

INCLUDE "imp_d.txt";

LINKS BACK D4R_OPT TO BACK {
    :"1&2"  & D1R_OPT:"1&2";
    :"3&4"  & D2R_OPT:"1&2";
    :"5&6"  & D3R_OPT:"1&2";
/*  :"7&8"  & E4R_OPT:"1&2";
    :"9&10" & K2R_OPT:"1&2";
   :"11&12" & K1R_OPT:"1&2";
   :"13&14" & E1R_OPT:"1&2";
   :"15&16" & E2R_OPT:"1&2";
   :"17&18" & E3R_OPT:"1&2"; */
}


///////////////////////////////////

